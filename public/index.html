<!DOCTYPE html>
<!--[if lt IE 9 ]><html class="no-js oldie" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="no-js oldie ie9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>TrojanRescues</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/bar.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>
    <script src="js/pace.min.js"></script>


    <link rel="shortcut icon" href="images/rescues.ico" type="image/x-icon">
    <link rel="icon" href="images/rescues.ico" type="image/x-icon">

</head>

<body id="top">

<!-- header
================================================== -->
<header class="s-header">

    <div class="header-logo">
        <a class="site-logos" href="index.html">
            <img src="images/logo.png" alt="Homepage" id="logo">
        </a>
    </div>

    <nav class="header-nav">

        <a href="#0" class="header-nav__close" title="close"><span>Close</span></a>

        <div class="header-nav__content">
            <h3>Navigation</h3>

            <ul class="header-nav__list">
                <li class="current"><a class="smoothscroll"  href="#home" title="home">Home</a></li>
                <li><a class="smoothscroll"  href="#about" title="about">About</a></li>
                <li><a class="smoothscroll"  href="#services" title="services">Mission</a></li>
                <li><a class="smoothscroll"  href="#works" title="works">Potential</a></li>
                <li><a class="smoothscroll"  href="#clients" title="clients">Solution</a></li>
                <li><a class="smoothscroll"  href="#contact" title="contact">Map</a></li>
            </ul>

        </div> <!-- end header-nav__content -->

    </nav>  <!-- end header-nav -->

    <a class="header-menu-toggle" href="#0">
        <span class="header-menu-text">Menu</span>
        <span class="header-menu-icon"></span>
    </a>

</header> <!-- end s-header -->


<!-- home
================================================== -->
<section id="home" class="s-home target-section" data-parallax="scroll" data-image-src="images/hero-bg.jpg" data-natural-width=3000 data-natural-height=2000 data-position-y=center>

    <div class="overlay"></div>
    <div class="shadow-overlay"></div>

    <div class="home-content">

        <div class="row home-content__main">

            <h3>We are Trojan ResCues</h3>

            <h1>
                We are a dedicated group <br>
                who is seeking for a new<br>
                solution and a revolutionary technology
                to fight against natural disasters<br>
            </h1>

            <div class="home-content__buttons">
                <a href="#clients" class="smoothscroll btn btn--stroke">
                    Learn More
                </a>
            </div>

        </div>

        <div class="home-content__scroll">
            <a href="#about" class="scroll-link smoothscroll">
                <span>Scroll Down</span>
            </a>
        </div>

        <div class="home-content__line"></div>

    </div> <!-- end home-content -->


</section> <!-- end s-home -->


<!-- about
================================================== -->
<section id='about' class="s-about">

    <div class="row section-header has-bottom-sep" data-aos="fade-up">
        <div class="col-full">

            <h1 class="display-1 display-1--light">Who Are We</h1>
        </div>
    </div> <!-- end section-header -->

    <div class="row about-desc" data-aos="fade-up">
        <div class="col-full">
            <p>
                We are a group of students from Troy University. We were inspired by millions of people around the world coming together to fight the Australian wildfire, so we created this software to help fight against this terrible disaster.
                <br> This is how much destruction the wildfire has caused:
            </p>

        </div>
    </div> <!-- end about-desc -->

    <div class="row about-stats stats block-1-4 block-m-1-2 block-mob-full" data-aos="fade-up">

        <div class="col-block stats__col ">
            <div class="stat__count">18M</div>
            <h5>Hectares Burnt</h5>
        </div>
        <div class="col-block stats__col">
            <div class="stats__count">6500</div>
            <h5>Destroyed Buildings</h5>
        </div>
        <div class="col-block stats__col">
            <div class="stat__count">1B</div>
            <h5>Dead Animals</h5>
        </div>
        <div class="col-block stats__col">
            <div class="stats__count">29</div>
            <h5>People Died</h5>
        </div>

    </div> <!-- end about-stats -->

    <div class="about__line"></div>

</section> <!-- end s-about -->


<!-- services
================================================== -->
<section id='services' class="s-services">

    <div class="row section-header has-bottom-sep" data-aos="fade-up">
        <div class="col-full">
            <h3 class="subhead">What We Do</h3>
            <h1 class="display-2">Some of the tasks we perform are:</h1>
        </div>
    </div> <!-- end section-header -->

    <div class="row services-list block-1-2 block-tab-full">

        <div class="col-block service-item" data-aos="fade-up">
            <div class="service-icon">
                <i class="icon-building"></i>
            </div>
            <div class="service-text">
                <h3 class="h2" style="color: #39b54a; margin-bottom: 57px;">Business</h3>

                <p>
                    We plan to work with the Australian Government to help restore the original habitat condition.
                    We look forward to assisting the fire fighters and the police department with additional research as well
                </p>
            </div>
        </div>

        <div class="col-block service-item" data-aos="fade-up">
            <div class="service-icon">
                <i class="icon-earth"></i>
            </div>
            <div class="service-text">
                <h3 class="h2" style="color: #39b54a;">Fighting Natural Disaster Globally</h3>
                <p>We specifically pick Australia wildfire as our main target this time to test our software. If everything is working effectively, we will train our machine to be able to aid with other natural disasters all over the globe
                </p>
            </div>
        </div>

        <div class="col-block service-item" data-aos="fade-up">
            <div class="service-icon">
                <i class="icon-search"></i>
            </div>
            <div class="service-text">
                <h3 class="h2" style="color: #39b54a;">Searching for Injured Victims and Animals</h3>
                <p>Reporting live to the server the location where the drone captures injured victims and animals and providing medical assistance as soon as possible
                </p>
            </div>
        </div>

        <div class="col-block service-item" data-aos="fade-up">
            <div class="service-icon">
                <i class="icon-group"></i>
            </div>
            <div class="service-text">
                <h3 class="h2" style="color: #39b54a;"> Detecting how serious the injury is </h3>
                <p>Diagnose injuries and offer medical assistance based on victims' condition by accessing high-end database including doctors and specialists in the field
                </p>
            </div>
        </div>

    </div> <!-- end services-list -->

</section> <!-- end s-services -->


<!-- works
================================================== -->
<section id='works' class="s-works">

    <div class="intro-wrap">

        <div class="row section-header has-bottom-sep light-sep" data-aos="fade-up">
            <div class="col-full">
                <h3 class="subhead">We can extend this globally</h3>
                <h1 class="display-2 display-2--light">Australia is not the only country that needs help</h1>
            </div>
        </div> <!-- end section-header -->

    </div> <!-- end intro-wrap -->

    <div class="row works-content">
        <div class="col-full masonry-wrap">
            <div class="masonry">

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/Texas.jpg" class="thumb-link" title="Texas, USA" data-size="1050x700">
                                <img src="images/portfolio/Texas.jpg"
                                     srcset="images/portfolio/Texas.jpg 1x, images/portfolio/Texas.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                Texas, USA
                            </h3>
                            <p class="item-folio__cat">
                                Flooding
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>A state of disaster has been declared in 13 Texas counties as some areas experience more than 3 feet of rain.</p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/Brazil.jpg" class="thumb-link" title="Brazil" data-size="1050x700">
                                <img src="images/portfolio/Brazil.jpg"
                                     srcset="images/portfolio/Brazil.jpg 1x, images/portfolio/Brazil.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                Brazil
                            </h3>
                            <p class="item-folio__cat">
                                Amazon Rainforest fire
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>Brazil forest fires rage as farmers push into the Amazon Rainforest.</p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/California.jpg" class="thumb-link" title="California, USA" data-size="1050x700">
                                <img src="images/portfolio/California.jpg"
                                     srcset="images/portfolio/California.jpg 1x, images/portfolio/California.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                California, USA
                            </h3>
                            <p class="item-folio__cat">
                                Wildfires
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>Evacuations Ordered as Kincade Fire Blazes Northern California
                                <br>The Kincade fire has burned more than 10,000 acres.<br></p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/Indonesia.jpg" class="thumb-link" title="Indonesia" data-size="1050x700">
                                <img src="images/portfolio/Indonesia.jpg"
                                     srcset="images/portfolio/Indonesia.jpg 1x, images/portfolio/Indonesia.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                Indonesia
                            </h3>
                            <p class="item-folio__cat">
                                Tsunami
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>Death Toll Rises After Tsunami Kills at Least 370 in Indonesia.</p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/New%20Zealand.jpg" class="thumb-link" title="New Zealand" data-size="1050x700">
                                <img src="images/portfolio/New%20Zealand.jpg"
                                     srcset="images/portfolio/New Zealand.jpg 1x, images/portfolio/New Zealand.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                New Zealand
                            </h3>
                            <p class="item-folio__cat">
                                Volcano Eruption
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>New Zealand's Volcano eruption.</p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

                <div class="masonry__brick" data-aos="fade-up">
                    <div class="item-folio">

                        <div class="item-folio__thumb">
                            <a href="images/portfolio/Puerto%20Rico.jpg" class="thumb-link" title="Puerto Rico" data-size="1050x700">
                                <img src="images/portfolio/Puerto%20Rico.jpg"
                                     srcset="images/portfolio/Puerto Rico.jpg 1x, images/portfolio/Puerto Rico.jpg 2x" alt="">
                            </a>
                        </div>

                        <div class="item-folio__text">
                            <h3 class="item-folio__title">
                                Puerto Rico
                            </h3>
                            <p class="item-folio__cat">
                                Earthquake
                            </p>
                        </div>

                        <a href="https://www.behance.net/" class="item-folio__project-link" title="Project link">
                            <i class="icon-link"></i>
                        </a>

                        <div class="item-folio__caption">
                            <p>The island has experienced increased seismic activity recently, with hundreds of small quakes occurring since Dec. 28, 2019</p>
                        </div>

                    </div>
                </div> <!-- end masonry__brick -->

            </div> <!-- end masonry -->
        </div> <!-- end col-full -->
    </div> <!-- end works-content -->

</section> <!-- end s-works -->


<!-- clients
================================================== -->
<section id="clients" class="s-clients">

    <div class="row section-header" data-aos="fade-up">
        <div class="col-full">
            <h3 class="subhead">Our Code</h3>
            <h1 class="display-2">Take a look at our technology, brought to you by Trojan ResCues!</h1>
        </div>

        <h2>Pose Recognizer Model</h2>
        <button type="button" onclick="poseInit()">Start</button>
        <div><canvas id="capture"></canvas></div>
        <div id="pose-label-container"></div>
        <button style="margin-top: 20px" type="button" onclick="stopPose()">Stop</button>

        <h2>Audio Recognizing Model</h2>
        <button type="button" onclick="audioInit()">Start</button>
        <div id="audio-label-container"></div>
        <button style="margin-top: 20px" type="button" onclick="stopAudio()">Stop</button>

        <h2 style="margin-top: 20%">Kangaroo Detection</h2>
        <video width="1920" height="1080" controls>
            <source src="videos/kangaroos.mp4" type="video/mp4">
        </video>

        <h2 style="margin-top: 20%">Drone Implementation Demo</h2>
        <video width="640" height="480" controls>
            <source src="videos/cues.mp4" type="video/mp4">
        </video>
    </div> <!-- end section-header -->

    <div class="row clients-outer" data-aos="fade-up">
        <div class="col-full">
            <div class="clients">

                <a href="#0" title="" class="clients__slide"><img src="images/clients/python.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/apple.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/android.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/JS.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/machine_learning.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/css.png" /></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/html-512.png"/></a>
                <a href="#0" title="" class="clients__slide"><img src="images/clients/ubuntu.png" /></a>

            </div> <!-- end clients -->
        </div> <!-- end col-full -->
    </div> <!-- end clients-outer -->

    <div class="row clients-testimonials" data-aos="fade-up">
        <div class="col-full">
            <div class="testimonials">

                <div class="testimonials__slide">

                    <p>"Hopefully that will keep inspiring the people to support this terrible disaster that we’re going through and helps to recover all the things that we need," Nadal said after Federer and him donated $172,000</p>

                    <img src="images/avatars/user-01.jpg" alt="Author image" class="testimonials__avatar">
                    <div class="testimonials__info">
                        <span class="testimonials__name">Rafael Nadal</span>
                        <span class="testimonials__pos">One of the Greatest Tennis Player of All Time</span>
                    </div>

                </div>

                <div class="testimonials__slide">

                    <p>Ellen set up a GoFundMe page in the hopes of raising $5 million. “This campaign will help the firefighters, people and animals of Australia. The goal is to raise US$5 million, and with your help, Ellen believes we can reach that goal and help those in need.”</p>

                    <img src="images/avatars/user-05.jpg" alt="Author image" class="testimonials__avatar">
                    <div class="testimonials__info">
                        <span class="testimonials__name">Ellen DeGeneres</span>
                        <span class="testimonials__pos">American Comedian</span>
                    </div>

                </div>

                <div class="testimonials__slide">

                    <p>The Australian actor and star of Thor pledged on social media: “My family and I are contributing a million dollars.”</p>

                    <img src="images/avatars/user-02.jpg" alt="Author image" class="testimonials__avatar">
                    <div class="testimonials__info">
                        <span class="testimonials__name">Chris Hemsworth</span>
                        <span class="testimonials__pos">Celebrity</span>
                    </div>

                </div>

            </div><!-- end testimonials -->

        </div> <!-- end col-full -->
    </div> <!-- end client-testimonials -->

</section> <!-- end s-clients -->


<!-- contact
================================================== -->
<section id="contact" class="s-contact">

    <div class="overlay"></div>
    <div class="contact__line"></div>

    <div class="row section-header" data-aos="fade-up">
        <div class="col-full">
            <h3 class="subhead">Map</h3>
            <h1 class="display-2 display-2--light">Find out where in Australia is getting hit the hardest!</h1>
        </div>

        <img src="images/map.png" alt="" style="width: 80%">
        <p><br>Any business inquires are more than welcomed! We can easily install our software on drones/ phones/ other devices without boundaries!</p>
    </div>




</section> <!-- end s-contact -->


<!-- footer
================================================== -->
<footer>

    <div class="row footer-main">

        <div class="tab-full footer-desc">

            <div class="footer-logo"></div>

        </div>

    </div> <!-- end footer-main -->

    <div class="row footer-bottom">

        <div class="col-twelve">
            <div class="go-top">
                <a class="smoothscroll" title="Back to Top" href="#top"><i class="icon-arrow-up" aria-hidden="true"></i></a>
            </div>
        </div>

    </div> <!-- end footer-bottom -->
    <p> &copy 2020 Trojan ResCues. All rights reserved </p>

</footer> <!-- end footer -->


<!-- photoswipe background
================================================== -->
<div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">

    <div class="pswp__bg"></div>
    <div class="pswp__scroll-wrap">

        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title=
                    "Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title=
                    "Zoom in/out"></button>
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title=
                "Next (arrow right)"></button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>

    </div>

</div> <!-- end photoSwipe background -->


<!-- preloader
================================================== -->
<div id="preloader">
    <div id="loader">
        <div class="line-scale-pulse-out">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>


<!-- Java Script
================================================== -->
<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>
<script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/pose

    // the link to your poseModel provided by Teachable Machine export panel
    const POSE_URL = "/pose_model/";
    let poseModel, webcam, ctx, labelContainer, maxPredictions, webcamAnimation;

    async function poseInit() {
        const postModelUrl = POSE_URL + "model.json";
        const poseMetaUrl = POSE_URL + "metadata.json";

        // load the poseModel and metadata
        // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
        // Note: the pose library adds a tmPose object to your window (window.tmPose)
        poseModel = await tmPose.load(postModelUrl, poseMetaUrl);
        maxPredictions = poseModel.getTotalClasses();

        // Convenience function to setup a webcam
        const size = 200;
        const flip = true; // whether to flip the webcam
        webcam = new tmPose.Webcam(size, size, flip); // width, height, flip
        await webcam.setup(); // request access to the webcam
        await webcam.play();
        webcamAnimation = window.requestAnimationFrame(poseLoop);

        // append/get elements to the DOM
        const capture = document.getElementById("capture");
        capture.hidden = false;
        capture.width = size; capture.height = size;
        ctx = capture.getContext("2d");
        labelContainer = document.getElementById("pose-label-container");
        for (let i = 0; i < maxPredictions; i++) { // and class labels

            if (labelContainer.childNodes.length < 2) {
                labelLine = document.createElement('div');
                labelLine.className = 'label-line';

                labelBar = document.createElement("div");
                labelBar.className = "labelbar percentage percentage-1";

                labelText = document.createElement('span');
                labelText.className = 'label-text';
                labelLine.appendChild(labelText);
                labelLine.appendChild(labelBar);
                labelContainer.appendChild(labelLine);
            }
        }
    }

    async function poseLoop(timestamp) {
        webcam.update(); // update the webcam frame
        await posePredict();
        window.requestAnimationFrame(poseLoop);
    }

    function stopPose() {
        window.cancelAnimationFrame(webcamAnimation);
        document.getElementById('capture').hidden = true;
        webcam.stop();
    }

    async function posePredict() {
        // Prediction #1: run input through posenet
        // estimatePose can take in an image, video or canvas html element
        const { pose, posenetOutput } = await poseModel.estimatePose(webcam.canvas);
        // Prediction 2: run input through teachable machine classification poseModel
        const prediction = await poseModel.predict(posenetOutput);

        for (let i = 0; i < maxPredictions; i++) {
            let p = prediction[i].probability.toFixed(2) * 100;
            labelContainer.childNodes[i].childNodes[0].innerHTML = prediction[i].className + ' ( ' +  p + '% )';
            labelContainer.childNodes[i].childNodes[1].className = 'labelbar percentage percentage-' + p;
        }

        // finally draw the poses
        drawPose(pose);
    }

    function drawPose(pose) {
        if (webcam.canvas) {
            ctx.drawImage(webcam.canvas, 0, 0);
            // draw the keypoints and skeleton
            if (pose) {
                const minPartConfidence = 0.5;
                tmPose.drawKeypoints(pose.keypoints, minPartConfidence, ctx);
                tmPose.drawSkeleton(pose.keypoints, minPartConfidence, ctx);
            }
        }
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/speech-commands@0.4.0/dist/speech-commands.min.js"></script>


<script type="text/javascript">
    // more documentation available at
    // https://github.com/tensorflow/tfjs-models/tree/master/speech-commands

    // the link to your model provided by Teachable Machine export panel
    const AUDIO_URL = "http://localhost:3000/audio_model/";

    let audioRecognizer;

    async function createAudioModel() {
        const checkpointURL = AUDIO_URL + "model.json"; // model topology
        const metadataURL = AUDIO_URL + "metadata.json"; // model metadata

        const recognizer = speechCommands.create(
            "BROWSER_FFT", // fourier transform type, not useful to change
            undefined, // speech commands vocabulary feature, not useful for your models
            checkpointURL,
            metadataURL);

        // check that model and metadata are loaded via HTTPS requests.
        await recognizer.ensureModelLoaded();

        return recognizer;
    }

    async function audioInit() {
        audioRecognizer = await createAudioModel();
        const classLabels = audioRecognizer.wordLabels(); // get class labels
        const labelContainer = document.getElementById("audio-label-container");
        for (let i = 0; i < classLabels.length; i++) {
            if (labelContainer.childNodes.length < 2) {
                labelLine = document.createElement('div');
                labelLine.className = 'label-line';

                labelBar = document.createElement("div");
                labelBar.className = "labelbar percentage-red percentage-1";

                labelText = document.createElement('span');
                labelText.className = 'label-text';
                labelLine.appendChild(labelText);
                labelLine.appendChild(labelBar);
                labelContainer.appendChild(labelLine);
            }
        }

        // listen() takes two arguments:
        // 1. A callback function that is invoked anytime a word is recognized.
        // 2. A configuration object with adjustable fields
        audioRecognizer.listen(result => {
            const scores = result.scores; // probability of prediction for each class
            // render the probability scores per class
            for (let i = 0; i < classLabels.length; i++) {
                // const classPrediction = classLabels[i] + ": " + result.scores[i].toFixed(2);
                // labelContainer.childNodes[i].innerHTML = classPrediction;
                let p = scores[i].toFixed(2) * 100;
                labelContainer.childNodes[i].childNodes[0].innerHTML = classLabels[i] + ' ( ' +  p + '% )';
                labelContainer.childNodes[i].childNodes[1].className = 'labelbar percentage-red percentage-' + p;
            }
        }, {
            includeSpectrogram: true, // in case listen should return result.spectrogram
            probabilityThreshold: 0.75,
            invokeCallbackOnNoiseAndUnknown: true,
            overlapFactor: 0.50 // probably want between 0.5 and 0.75. More info in README
        });

        // Stop the recognition in 5 seconds.
        // setTimeout(() => audioRecognizer.stopListening(), 5000);
    }

    function stopAudio() {
        audioRecognizer.stopListening();
    }
</script>

</body>

</html>
